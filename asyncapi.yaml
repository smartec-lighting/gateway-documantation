asyncapi: '2.0.0'
info:
  title: Comando On/Off para Dispositivo
  version: '1.0.0'
  description: |
    Especificación AsyncAPI para el envío de comandos (on, off, dimming, rgb_on, rgb_off)
    a dispositivos vía MQTT. Este ejemplo modela la lógica de un handler que envía el
    comando recibido al dispositivo identificado.
servers:
  production:
    url: mqtt://broker.ejemplo.com
    protocol: mqtt
channels:
  LuminariaControlPayload:
      type: array
      on/Off:
        - description: Comando para encender o apagar luminaria
          type: array
          items:
            type: integer
          minItems: 3
          maxItems: 3
          example: [0, 0, 1]
        - description: Comando para ajustar dimming
          type: array
          items:
            type: integer
          minItems: 4
          maxItems: 4
          example: [0, 0, 3, 75]
      discriminator:
        propertyName: "2"
        mapping:
          "1": "#/components/schemas/LuminariaEncender"
          "2": "#/components/schemas/LuminariaApagar"
          "3": "#/components/schemas/LuminariaDimming"

    LuminariaEncender:
      type: array
      description: Comando para encender luminaria
      items:
        type: integer
      minItems: 3
      maxItems: 3
      example: [0, 0, 1]

    LuminariaApagar:
      type: array
      description: Comando para apagar luminaria
      items:
        type: integer
      minItems: 3
      maxItems: 3
      example: [0, 0, 2]

    LuminariaDimming:
      type: array
      description: Comando para ajustar dimming
      items:
        type: integer
      minItems: 4
      maxItems: 4
      example: [0, 0, 3, 75]
